{"batchcomplete":"","query":{"normalized":[{"from":"comparator","to":"Comparator"}],"pages":{"40929":{"pageid":40929,"ns":0,"title":"Comparator","revisions":[{"contentformat":"text/x-wiki","contentmodel":"wikitext","*":"{{other uses}}\nIn [[electronics]], a '''comparator''' is a device that compares two [[voltage]]s or [[Electric current|currents]] and outputs a digital signal indicating which is larger.  It has two analog input terminals <math>V_+\\,</math> and <math>V_-\\,</math> and one binary digital output <math>V_o\\,</math>.  The output is ideally \n:<math>V_o = \n\\begin{cases} \n1,  & \\mbox{if }V_+ > V_-  \\\\\n0,  & \\mbox{if }V_+ < V_- \n\\end{cases}</math>\nA comparator consists of a specialized high-[[gain (electronics)|gain]] [[differential amplifier]].  They are commonly used in devices that measure and digitize analog signals, such as [[analog-to-digital converter]]s (ADCs), as well as [[relaxation oscillator]]s.\n\n== Differential voltage ==\n\nThe differential voltages must stay within the limits specified by the manufacturer. Early integrated comparators, like the LM111 family, and certain high-speed comparators like the LM119 family, require differential voltage ranges substantially lower than the power supply voltages (\u00b115&nbsp;V vs. 36&nbsp;V).<ref>''[http://www.ti.com/lit/ds/symlink/lm111.pdf LM111/LM211/LM311 datasheet]. Texas Instruments. August 2003. Retrieved 2014-07-02.</ref> ''Rail-to-rail'' comparators allow any differential voltages within the power supply range. When powered from a bipolar (dual rail) supply, \n \n:<math>V_{S-} \\le V_+,V_- \\le V_{S+}</math>\n\nor, when powered from a unipolar [[Transistor-transistor logic|TTL]]/[[CMOS]] power supply:\n\n:<math>0 \\le V_+,V_- \\le V_{cc}</math>\n\nSpecific rail-to-rail comparators with [[Bipolar junction transistor#PNP|p-n-p]] input transistors, like the LM139 family, allow the input potential to drop 0.3&nbsp;volts ''below'' the negative supply rail, but do not allow it to rise above the positive rail.<ref>''[http://www.ti.com/lit/ds/symlink/lm139.pdf LM139/LM239/LM339/LM2901/LM3302 datasheet]. Texas Instruments. August 2012. Retrieved 2014-07-02.</ref> Specific ultra-fast comparators, like the LMH7322, allow input signal to swing below the negative rail ''and'' above the positive rail, although by a narrow margin of only 0.2&nbsp;V.<ref>''[http://www.ti.com/lit/ds/symlink/lmh7322.pdf LMH7322 datasheet]. Texas Instruments. March 2013. Retrieved 2014-07-02.</ref> Differential input voltage (the voltage between two inputs) of a modern rail-to-rail comparator is usually limited only by the full swing of power supply.\n\n==Op-amp voltage comparator==\n\n[[image:Op-Amp Comparator.svg|frame|right|A simple op-amp comparator]]\nAn [[operational amplifier]] (op-amp) has a well balanced difference input and a very high [[gain (electronics)|gain]]. This parallels the characteristics of comparators and can be substituted in applications with low-performance requirements.<ref>Malmstadt, Enke and Crouch, Electronics and Instrumentation for Scientists, The Benjamin/Cummings Publishing Company, Inc., 1981, ISBN 0-8053-6917-1, Chapter 5.</ref>\n\nIn theory, a standard op-amp operating in open-loop configuration (without negative feedback) may be used as a low-performance comparator.  When the non-inverting input (V+) is at a higher voltage than the inverting input (V-), the high gain of the op-amp causes the output to saturate at the highest positive voltage it can output. When the non-inverting input (V+) drops below the inverting input (V-), the output saturates at the most negative voltage it can output. The op-amp's output voltage is limited by the supply voltage. An op-amp operating in a linear mode with negative feedback, using a balanced, split-voltage power supply, (powered by \u00b1 V<sub>S</sub>) has its transfer function typically written as: <math>V_{out}=A_{o} (V_1 - V_2)</math>.  However, this equation may not be applicable to a comparator circuit which is non-linear and operates open-loop (no negative feedback)\n\nIn practice, using an [[operational amplifier]] as a comparator presents several disadvantages as compared to using a dedicated comparator:<ref>Ron Mancini, \"[http://www.edn.com/design/analog/4353925/Designing-with-comparators Designing with comparators],\" EDN, March 29, 2001.</ref>\n\n# Op-amps are designed to operate in the linear mode with negative feedback. Hence, an op-amp typically has a lengthy recovery time from saturation. Almost all op-amps have an internal compensation capacitor which imposes [[slew rate]] limitations for high frequency signals. Consequently, an op-amp makes a sloppy comparator with [[propagation delay]]s that can be as long as tens of microseconds.\n# Since op-amps do not have any internal hysteresis, an external hysteresis network is always necessary for slow moving input signals.\n# The quiescent current specification of an op-amp is valid only when the feedback is active. Some op-amps show an increased quiescent current when the inputs are not equal.\n# A comparator is designed to produce well limited output voltages that easily interface with digital logic. Compatibility with digital logic must be verified while using an op-amp as a comparator.\n# Some multiple-section op-amps may exhibit extreme channel-channel interaction when used as comparators.\n# Many op-amps have back to back diodes between their inputs. Op-amp inputs usually follow each other so this is fine. But comparator inputs are not usually the same. The diodes can cause unexpected current through inputs.\n\n== Working ==\n\n\nA dedicated voltage comparator will generally be faster than a general-purpose operational amplifier pressed into service as a comparator. A dedicated voltage comparator may also contain additional features such as an accurate, internal voltage reference, an adjustable [[hysteresis]] and a clock gated input.\n\nA dedicated voltage comparator chip such as LM339 is designed to interface with a digital logic interface (to a [[Transistor-transistor logic|TTL]] or a [[CMOS]]). The output is a binary state often used to interface real world signals to digital circuitry (see [[analog to digital converter]]). If there is a fixed voltage source from, for example, a DC adjustable device in the signal path, a comparator is just the equivalent of a cascade of amplifiers. When the voltages are nearly equal, the output voltage will not fall into one of the logic levels, thus analog signals will enter the digital domain with unpredictable results. To make this range as small as possible, the amplifier cascade is high gain. The circuit consists of mainly [[Bipolar transistor]]s. For very high frequencies, the input [[Electrical impedance|impedance]] of the stages is low. This reduces the saturation of the slow, large [[P-n junction|P-N junction]] bipolar transistors that would otherwise lead to long recovery times. Fast small [[Schottky diode]]s, like those found in binary logic designs, improve the performance significantly though the performance still lags that of circuits with amplifiers using analog signals. Slew rate has no meaning for these devices. For applications in [[flash ADC]]s the distributed signal across eight ports matches the voltage and current gain after each amplifier, and resistors then behave as level-shifters.\n\nThe LM339 accomplishes this with an [[open collector]] output. When the inverting input is at a higher voltage than the non inverting input, the output of the comparator connects to the negative power supply. When the non inverting input is higher than the inverting input, the output is 'floating' (has a very high impedance to ground).\nThe gain of op amp as comparator is given by this equation\nV(out)=V(in)\n\n==Key specifications==\n\nWhile it is easy to understand the basic task of a comparator, that is, comparing two voltages or currents, several parameters must be considered while selecting a suitable comparator:\n\n===Speed and power===\n\nWhile in general comparators are \"fast,\" their circuits are not immune to the classic speed-power tradeoff. High speed comparators use transistors with larger aspect ratios and hence also consume more power.<ref>Rogenmoser, R.; Kaeslin, H, \"The impact of transistor sizing on power efficiency in submicron CMOS circuits,\" Solid-State Circuits, IEEE Journal of Volume 32, Issue 7, Jul 1997 Page(s):1142\u20131145.</ref> Depending on the application, select either a comparator with high speed or one that saves power. For example, nano-powered comparators in space-saving chip-scale packages (UCSP), DFN or SC70 packages such as [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/4268 MAX9027], [http://www.linear.com/pc/productDetail.jsp?navId=H0,C1,C1154,C1002,C1463,P1593 LTC1540], [http://www.national.com/pf/LP/LPV7215.html LPV7215], [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/5823 MAX9060] and [http://www.microchip.com/wwwproducts/Devices.aspx?dDocName=en010414 MCP6541] are ideal for ultra-low-power, portable applications. Likewise if a comparator is needed to implement a relaxation oscillator circuit to create a high speed clock signal then comparators having few nano seconds of propagation delay may be suitable. [http://www.analog.com/en/amplifiers-and-comparators/comparators/adcmp572/products/product.html ADCMP572] (CML output), [http://www.ti.com/product/lmh7220 LMH7220] (LVDS Output), [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/1481 MAX999] (CMOS output / TTL output), [http://www.linear.com/pc/productDetail.jsp?navId=H0,C1,C1154,C1004,C1012,P1817 LT1719] (CMOS output / TTL output), [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/2490/t/al MAX9010] (TTL output), and [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/3400/t/al MAX9601] (PECL output) are examples of some good high speed comparators.\n\n=== Hysteresis ===\n\nA comparator normally changes its output state when the voltage between its inputs crosses through approximately zero volts. Small voltage fluctuations due to noise, always present on the inputs, can cause undesirable rapid changes between the two output states when the input voltage difference is near zero volts. To prevent this output oscillation, a small [[hysteresis]] of a few millivolts is integrated into many modern comparators.<ref>Ron Mancini, \"[http://www.edn.com/article/CA84881.html Adding Hysteresis to comparators],\" EDN, May 3, 2001.</ref> \nFor example, the [http://www.linear.com/pc/productDetail.jsp?navId=H0,C1,C1154,C1004,C1012,P38930 LTC6702], [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/2411/t/al MAX9021] and [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/2363/t/al MAX9031] have internal hysteresis desensitizing them from input noise. In place of one switching point, hysteresis introduces two: one for rising voltages, and one for falling voltages. The difference between the higher-level trip value (VTRIP+) and the lower-level trip value (VTRIP-) equals the hysteresis voltage (VHYST).\n\nIf the comparator does not have internal hysteresis or if the input noise is greater than the internal hysteresis then an external hysteresis network can be built using positive feedback from the output to the non-inverting input of the comparator. The resulting [[Schmitt trigger]] circuit gives additional noise immunity and a cleaner output signal. Some comparators such as [http://www.national.com/pf/LM/LMP7300.html LMP7300], [http://www.linear.com/pc/productDetail.jsp?navId=H0,C1,C1154,C1004,C1013,P1593 LTC1540], [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/1219 MAX931], [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/1279/t/al MAX971] and [http://www.analog.com/en/power-management/battery-management/adcmp341/products/product.html ADCMP341] also provide the hysteresis control through a separate hysteresis pin. These comparators make it possible to add a programmable hysteresis without feedback or complicated equations. Using a dedicated hysteresis pin is also convenient if the source impedance is high since the inputs are isolated from the hysteresis network.<ref>AN3616, Maxim Integrated Products, [http://www.maxim-ic.com/appnotes.cfm/an_pk/886/ Adding Extra Hysteresis to Comparators].</ref> When hysteresis is added then a comparator cannot resolve signals within the hysteresis band.\n\n===Output type===\n[[File:Dynamic Comparator.png|thumb|right|350px|A Low Power CMOS Clocked Comparator]]\n\nBecause comparators have only two output states, their outputs are near zero or near the supply voltage. Bipolar rail-to-rail comparators have a common-emitter output that produces a small voltage drop between the output and each rail. That drop is equal to the collector-to-emitter voltage of a saturated transistor. When output currents are light, output voltages of CMOS rail-to-rail comparators, which rely on a saturated MOSFET, range closer to the rails than their bipolar counterparts.<ref name=\"test\">AN886, Maxim Integrated Products, [http://www.maxim-ic.com/appnotes.cfm/an_pk/886/ Selecting the Right Comparator].</ref>\n\nOn the basis of outputs, comparators can also be classified as [[open drain]] or [[push\u2013pull output|push\u2013pull]]. Comparators with an open-drain output stage use an external pull up resistor to a positive supply that defines the logic high level. Open drain comparators are more suitable for mixed-voltage system design. Since the output is high impedance for logic level high, open drain comparators can also be used to connect multiple comparators on to a single bus. Push pull output does not need a pull up resistor and can also source current unlike an open drain output.\n\n===Internal reference===\n\nThe most frequent application for comparators is the comparison between a voltage and a stable reference. Most comparator manufacturers also offer comparators in which a reference voltage is integrated on to the chip. Combining the reference and comparator in one chip not only saves space, but also draws less supply current than a comparator with an external reference.<ref name=\"test\"/> ICs with wide range of references are available such as [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/5823/t/al MAX9062] (200 mV reference), [http://www.linear.com/pc/productDetail.jsp?navId=H0,C1,C1154,C1004,C1013,P2340 LT6700] (400 mV reference), [http://www.analog.com/en/power-management/battery-management/adcmp350/products/product.html ADCMP350] (600&nbsp;mV reference), [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/4268/t/al MAX9025] (1.236&nbsp;V reference), [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/2122/t/al MAX9040] (2.048&nbsp;V reference), [http://focus.ti.com/docs/prod/folders/print/tlv3012.html TLV3012] (1.24&nbsp;V reference) and [http://www.datasheetcatalog.org/datasheet/stmicroelectronics/9208.pdf TSM109] (2.5&nbsp;V reference).\n\n===Continuous versus clocked===\n\nA continuous comparator will output either a \"1\" or a \"0\" any time a high or low signal is applied to its input and will change quickly when the inputs are updated.  However, many applications only require comparator outputs at certain instances, such as in A/D converters and memory. By only strobing a comparator at certain intervals, higher accuracy and lower power can be achieved with a clocked (or dynamic) comparator structure, also called a latched comparator. Often latched comparators employ strong positive feedback for a \"regeneration phase\" when a clock is high, and have a \"reset phase\" when the clock is low.<ref>\n{{cite book\n | title = Offset Reduction Techniques in High-Speed Analog-to-Digital Converters: Analysis, Design and Tradeoffs\n | author = Pedro M. Figueiredo, Jo\u00e3o C. Vital\n | publisher = Springer\n | year = 2009\n | isbn = 978-1-4020-9715-7\n | pages = 54\u201362\n | url = https://books.google.com/books?id=El9Ki0spMEwC&pg=PA55&dq=%22output+voltages+of+the+latched+comparator%22+regeneration+reset+phase#v=onepage&q=%22output%20voltages%20of%20the%20latched%20comparator%22%20regeneration%20reset%20phase&f=false\n }}</ref>  \nThis is in contrast to a continuous comparator, which can only employ weak positive feedback since there is no reset period.\n\n== Applications ==\n{{main|Comparator applications}}\n\n=== Null detectors ===\n\nA null detector is one that functions to identify when a given value is zero. Comparators can be a type of amplifier distinctively for null comparison measurements. It is the equivalent to a very high gain amplifier with well-balanced inputs and controlled output limits. The circuit compares the two input voltages, determining the larger. The inputs are an unknown voltage and a reference voltage, usually referred to as v<sub>u</sub> and v<sub>r</sub>. A reference voltage is generally on the non-inverting input (+), while v<sub>u</sub> is usually on the inverting input (&minus;). (A circuit diagram would display the inputs according to their sign with respect to the output when a particular input is greater than the other.)  The output is either positive or negative, for example \u00b112&nbsp;V. In this case, the idea is to detect when there is no difference between in the input voltages. This gives the identity of the unknown voltage since the reference voltage is known.\n\nWhen using a comparator as a null detector, there are limits as to the accuracy of the zero value measurable. Zero output is given when the magnitude of the difference in the voltages multiplied by the gain of the amplifier is less than the voltage limits. For example, if the gain of the amplifier is 10<sup>6</sup>, and the voltage limits are \u00b16&nbsp;V, then no output will be given if the difference in the voltages is less than 6&nbsp;\u03bcV. One could refer to this as a sort of uncertainty in the measurement.<ref>{{Citation |title=Electronics and Instrumentation for Scientists |last1=Malmstadt |first1=Howard V. |last2=Enke |first2=Christie G. |last3=Crouch |first3=Stanley R. |publisher=The Benjamin/Cummings Publishing Co |date=January 1981  |isbn=0-8053-6917-1 |pages=108\u2013110}}</ref>\n\n=== Zero-crossing detectors ===\n\nFor this type of detector, a comparator detects each time an [[Alternating Current|ac]] pulse changes polarity. The output of the comparator changes state each time the pulse changes its polarity, that is the output is HI (high) for a positive pulse and LO (low) for a negative pulse squares the input signal.<ref>''Electronics and Instrumentation for Scientists.''  Malmstadt, Enke, and Crouch, The Benjamin/Cummings Publishing Co., In., 1981, p.230.</ref>\n\n===Relaxation oscillator===\n\nA comparator can be used to build a [[relaxation oscillator]]. It uses both positive and negative feedback. The positive feedback is a [[Schmitt trigger]] configuration. Alone, the trigger is a [[bistable multivibrator]]. However, the slow [[negative feedback]] added to the trigger by the RC circuit causes the circuit to oscillate automatically. That is, the addition of the RC circuit turns the hysteretic bistable [[multivibrator]] into an [[astable multivibrator]].<ref>Paul Horowitz and Winfield Hill: ''The Art of Electronics'',\nCambridge University Press, Second edition, Cambridge 1989, pp.284\u2013285.</ref>\n\n===Level shifter===\n\nThis circuit requires only a single comparator with an open-drain output as in the [http://www.ti.com/product/lm393 LM393], [http://focus.ti.com/docs/prod/folders/print/tlv3011.html TLV3011] or [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/4268/t/al MAX9028]. The circuit provides great flexibility in choosing the voltages to be translated by using a suitable pull up voltage. It also allows the translation of bipolar \u00b15&nbsp;V logic to unipolar 3&nbsp;V logic by using a comparator like the [http://www.maxim-ic.com/quick_view2.cfm/qv_pk/1279 MAX972].<ref name=\"test\"/>\n\n===Analog-to-digital converters===\n\nWhen a comparator performs the function of telling if an input voltage is above or below a given threshold, it is essentially performing a 1-bit [[Quantization (signal processing)|quantization]]. This function is used in nearly all analog to digital converters (such as [[Flash ADC|flash]], pipeline, [[Successive approximation ADC|successive approximation]], [[delta-sigma modulation]], folding, interpolating, [[Integrating ADC|dual-slope]] and others) in combination with other devices to achieve a multi-bit quantization.<ref>Phillip Allen and Douglas Holberg: ''CMOS Analog Circuit Design'',\nOxford University Press, Second edition, Oxford 2002.</ref>\n\n===Window detectors===\n\nComparators can also be used as window detectors. In a [[window detector]], a comparator is used to compare two voltages and determine whether a given input voltage is under voltage or over voltage.\n\n==See also==\n* [[Current comparator]]\n* [[Constant fraction discriminator]]\n* [[Digital comparator]]\n* [[Flash ADC]]\n* [[List of LM-series integrated circuits]]\n* [[Sorting network]]\n* [[Zero crossing threshold detector]]\n\n{{FS1037C}}\n\n== References ==\n\n{{reflist}}\n\n== External links ==\n{{Wiktionary}}\n* [http://home.cogeco.ca/~rpaisley4/Comparators.html IC Comparator reference page at home.cogeco.ca]\n* [http://www.afrotechmods.com/videos/op_amp_comparator.htm Comparator tutorial video with example circuits]\n* [http://www.labbookpages.co.uk/electronics/resNetworks/comparator.html A Java based resistor value search tool for analysing an inverting comparator circuit with hysteresis]\n\n{{Authority control}}\n[[Category:Electronic circuits]]"}]}}}}