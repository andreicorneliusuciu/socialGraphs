{"batchcomplete":"","query":{"normalized":[{"from":"retiming","to":"Retiming"}],"pages":{"7770362":{"pageid":7770362,"ns":0,"title":"Retiming","revisions":[{"contentformat":"text/x-wiki","contentmodel":"wikitext","*":"{{Refimprove|date=November 2010}}\n'''Retiming''' is the technique of moving the structural location of [[Latch (electronic)|latches]] or registers in a [[digital circuit]] to improve its performance, area, and/or [[power optimization (EDA)|power]] characteristics in such a way that preserves its functional behavior at its outputs.  Retiming was first described by [[Charles E. Leiserson]] and [[James B. Saxe]] in 1983.<ref>http://citeseer.ist.psu.edu/context/96547/0</ref>\n\nThe technique uses a [[directed graph]] where the vertices represent asynchronous combinational blocks and the directed edges represent a series of registers or latches (the number of registers or latches can be zero). Each vertex has a value corresponding to the delay through the combinational circuit it represents. After doing this, one can attempt to optimize the circuit by pushing registers from output to input and vice versa - much like [[bubble pushing]].  Two operations can be used - deleting a register from each input of a vertex while adding a register to all outputs, and conversely adding a register to each input of vertex and deleting a register from all outputs. In all cases, if the rules are followed, the circuit will have the same functional behavior as it did before retiming.\n\n==Formal description==\n\nThe initial formulation of the retiming problem as described by Leiserson and Saxe is as follows. Given a [[directed graph]] <math>G:=(V,E)</math> whose vertices represent [[logic gates]] or combinational delay elements in a circuit, assume there is a directed edge <math>e:=(u,v)</math> between two elements that are connected directly or through one or more registers.  Let the ''weight'' of each edge <math>w(e)</math> be the number of registers present along edge <math>e</math> in the initial circuit.  Let <math>d(v)</math> be the [[propagation delay]] through vertex <math>v</math>.  The goal in retiming is to compute an integer ''lag'' value <math>r(v)</math> for each vertex such that the retimed weight <math>w_r(e):=w(e)+r(v)-r(u)</math> of every edge is non-negative. There is a proof that this preserves the output functionality.<ref name=\"one\">C. E. Leiserson, J. B. Saxe, \"Retiming Synchronous Circuitry,\" Algorithmica, Vol. 6, No. 1, pp. 5-35, 1991.</ref>\n\n===Minimizing the clock period with network flow===\n\nThe most common use of retiming is to minimize the [[clock period]].  A simple technique to optimize the clock period is to search for the minimum feasible period (e.g. using [[binary search]]).\n\nThe feasibility of a clock period <math>T</math> can be checked in one of several ways.  The [[linear program]] below is feasible if and only if <math>T</math> is a feasible clock period.  Let <math>W(u,v)</math> be the minimum number of registers along any path from <math>u</math> to <math>v</math> (if such a path exists), and <math>D(u,v)</math> is the maximum delay along any path from <math>u</math> to <math>v</math> with W(u,v) registers.  The dual of this program is a [[minimum cost circulation problem]], which can be solved efficiently as a network problem.  The limitations of this approach arise from the enumeration and size of the <math>W</math> and <math>D</math> matrices. Xilinx ISE software provides options for Register Retiming.\n\n{| \n| Given \n| colspan=\"2\" | <math>w(e), W(u,v), D(u,v)</math> and a target clock period <math>T</math>\n|-\n| Find \n| colspan=\"2\" | <math>r(v):V \\to \\mathbb{Z}</math>\n|-\n| Such that\n|-\n|\n| <math>r(u) - r(v)</math>\n| <math>\\le w(e)</math>\n|-\n|\n| <math>r(u) - r(v)</math>\n| <math>\\le W(u,v) - 1</math> if <math>D(u,v) > c</math>\n|}\n\n===Minimizing the clock period with MILP===\n\nAlternatively, feasibility of a clock period <math>T</math> can be expressed as a mixed-integer [[linear program]] (MILP).  A solution will exist and a valid lag function <math>r(v)</math> will be returned if and only if the period is feasible.\n\n{| \n| Given \n| colspan=\"2\" | <math>w(e), d(v)</math> and a target clock period <math>T</math>\n|-\n| Find \n| colspan=\"2\" | <math>r(v):V \\to \\mathbb{Z}</math> and <math>R(v):V \\to \\mathcal{R}</math>\n|-\n| Such that\n|-\n|\n| <math>r(v) - R(V)</math>\n| <math>\\le -d(v)/T</math>\n|-\n|\n| <math>R(v) - r(v)</math>\n| <math>\\le 1</math>\n|-\n|\n| <math>r(u) - r(v)</math>\n| <math>\\le w(e)</math>\n|-\n|\n| <math>R(u) - R(v)</math>\n| <math>\\le w(e) - d(v)/T</math>\n|}\n\n===Other formulations and extensions===\n\nAlternate formulations allow the minimization of the register count and the minimization of the register count under a delay constraint.  The initial paper includes extensions that allow the consideration of fan-out sharing and a more general delay model.  Subsequent work has addressed the inclusion of register delays,<ref name=\"two\">K. N. Lalgudi, M. C. Papaefthymiou, {{doi-inline|10.1109/43.664222|Retiming edge-triggered circuits under general delay models}}, [[IEEE Transactions on Computer-Aided Design of Integrated Circuits and Systems]], vol.16, no.12, pp.1393-1408, Dec. 1997.</ref> load-dependent delay models,<ref name=\"two\"/> and hold constraints.<ref name=\"three\">M. C. Papaefthymiou, {{doi-inline|10.1145/288548.289060|Asymptotically efficient retiming under setup and hold constraints}}, IEEE/ACM International Conference on Computer-Aided Design, 1998.</ref>\n\n==Problems==\n\nRetiming has found industrial use, albeit sporadic.  Its primary drawback is that the state encoding of the circuit is destroyed, making debugging, testing, and verification substantially more difficult.  Some retimings may also require complicated initialization logic to have the circuit start in an identical initial state.  Finally, the changes in the circuit's topology have consequences in other logical and physical synthesis steps that make [[design closure]] difficult.\n\n==Alternatives==\n\nClock skew scheduling is a related technique for optimizing sequential circuits.  Whereas retiming relocates the structural position of the registers, clock skew scheduling moves their temporal position by scheduling the arrival time of the clock signals.  The lower bound of the achievable minimum clock period of both techniques is the maximum mean cycle time (i.e. the total combinational delay along any path divided by the number of registers along it).\n\n==See also==\n* [[Logic Synthesis]]\n* [[Electronic Design Automation]]\n\n==Notes==\n<references/>\n\n==References==\n*{{cite journal|last1=Leiserson|first=1C. E. |first2=J. B. |last2=Saxe|year=1983|title=Optimizing Synchronous Systems|journal=Journal of VLSI and Computer Systems|volume=1|issue=1|pages=41\u201367}}\n\n==External links==\n* [http://people.csail.mit.edu/devadas/6.373/lectures/l10/ Presentation on retiming from MIT]\n* [http://sites.google.com/site/mhutton1/2003_IWLS_BA_retime.pdf A Safe and Complete Gate-Level Register Retiming Algorithm]\n\n[[Category:Timing in electronic circuits]]\n[[Category:Formal methods]]"}]}}}}